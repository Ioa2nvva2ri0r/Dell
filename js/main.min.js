"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var swiper=new Swiper(".swiper",{loop:!0,speed:800,hideOnClick:!0,spaceBetween:200,navigation:{nextEl:".swiper-button-next"},effect:"coverflow",autoplay:{delay:7e3},a11y:{nextSlideMessage:"Вправо"},pagination:{el:".swiper-pagination",clickable:!0}});function addError(e,t,r){var n=function(e,t){return e.classList.toggle(t)};n(e,"error-valid__input"),e.insertAdjacentHTML("afterend",'<div id="error-valid" class="error-valid__message" role="alert">'.concat(t,"<div/>"));var a=document.getElementById("error-valid");null!==a&&setTimeout((function(){a.parentElement.style.position="relative",n(a,"error-valid__message-active"),setTimeout((function(){a.parentElement.style.position=null,n(e,"error-valid__input"),n(a,"error-valid__message-active")}),r-305),setTimeout((function(){a.remove()}),r)}),10)}function regExp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=function(e,t){return new RegExp("[^".concat(e).concat(r,"]"),t)};switch(e){case"email":return!/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t);case"tel":return!/^\+\d{1,3}\(\d{2,3}\)\d{2,3}-\d{2}-\d{2}$/.test(t);case"number":return n("0-9").test(t);case"ru":return n("а-яё","gi").test(t);case"en":return n("a-z","gi").test(t)}}function debounce(e,t){var r=!1;return function(){r||(r=!0,e.apply(this,arguments),setTimeout((function(){return r=!1}),t))}}var animationMessage=debounce(addError,5e3);function checkError(e){var t=e.type,r=e.value,n=e.name,a=e.placeholder,o=e.checked,i=e.required,c=e.lang,l=e.maxLength,u=e.minLength,s=a||""!==a?a:n,d=l,m=u,f=r.trim(),y=f.length,v=function(e){return t===e},g=e.dataset.excep,p="ru"===c?"русского":"en"===c&&"латинского",_=""!==f||i;function b(t,r){return!!t&&(animationMessage(e,"Поле «".concat(s,"» ").concat(r),5e3),!0)}return[b(y<1&&i,"не указано!"),b((-1!==m||-1!==d)&&y>=1&&(y<m||y>d),"не должно быть ".concat(m&&!d?"менее ".concat(m):d&&!m?"более ".concat(d):m&&d&&(m===d?"менее и более ".concat(m):"".concat(m," и более ").concat(d))," символов!")),b(""!==c&&regExp(c,f,g),"может содержать в себе только: буквы ".concat(p," алфавита!")),b((v("radio")||v("checkbox"))&&!o&&i,"не выбрано!"),b(v("number")&&regExp(t,f)&&_,"содержит символы не являющиеся цифрами!"),b(v("email")&&regExp(t,f)&&_,"указано не правильно, или имеет некорректную формулировку!"),b(v("tel")&&regExp(t,f)&&_,"может содержать в себе только следующую маску ввода: +«Код страны»(«Код оператора»)«Номер телефона через тире»!")].includes(!0)}function dataForm(e){if(e.constructor===HTMLFormElement){var t=_toConsumableArray(new Set(Object.values(e.elements).filter((function(e){return"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName}))));if(0===t.length)return null;for(var r={},n=0,a=Object.entries(t);n<a.length;n++){var o=_slicedToArray(a[n],2),i=o[0],c=o[1],l=c.type,u=c.name,s=c.value,d=c.checked,m="radio"===l||"checkbox"===l;if(!0===checkError(c))return null;m&&d&&(r[u]=d),m||""===s||(r[u]=s),Number(i)===t.length-1&&t.forEach((function(e){var t="radio"===e.type||"checkbox"===e.type;t&&(e.checked=!1),t||(e.value="")}))}return r}throw new Error("Passed parameter is not a HTML-form!")}var body=document.body,menu=document.getElementById("menu"),menuList=document.getElementById("menu-list"),menuBtnToggle=document.getElementById("menu-open");function closeMenu(){menuBtnToggle.classList.remove("header__menu-open-active"),menu.classList.remove("header__nav-active"),body.style.overflowY=null}body.addEventListener("click",(function(e){menuBtnToggle.contains(e.target)||menuList.contains(e.target)||closeMenu()})),menuBtnToggle.addEventListener("click",(function(){menuBtnToggle.classList.toggle("header__menu-open-active"),menu.classList.toggle("header__nav-active"),menu.classList.contains("header__nav-active")?body.style.overflowY="hidden":body.style.overflowY=null})),document.querySelectorAll(".header__nav-link").forEach((function(e){return e.addEventListener("click",closeMenu)}));var form=document.getElementById("form-contact");document.getElementById("btn-submit").addEventListener("click",(function(){if(dataForm(form)){var e=document.createElement("div");e.id="success",e.className="success__message",e.role="alert",e.textContent="Данные успешно отправлены! В ближайшее время мы свяжемся с вами!",form.appendChild(e),setTimeout((function(){e.classList.add("success__message-active"),setTimeout((function(){e.classList.remove("success__message-active")}),4695),setTimeout((function(){e.remove()}),5e3)}),10)}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInN3aXBlciIsIlN3aXBlciIsImxvb3AiLCJzcGVlZCIsImhpZGVPbkNsaWNrIiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsImVmZmVjdCIsImF1dG9wbGF5IiwiZGVsYXkiLCJhMTF5IiwibmV4dFNsaWRlTWVzc2FnZSIsInBhZ2luYXRpb24iLCJlbCIsImNsaWNrYWJsZSIsImFkZEVycm9yIiwiaW5wdXQiLCJtZXNzYWdlIiwibXMiLCJ0b2dnbGVDc3NDbGFzcyIsImNzc0NsYXNzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY29uY2F0IiwiZXJyb3IiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2V0VGltZW91dCIsInBhcmVudEVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwicmVtb3ZlIiwicmVnRXhwIiwidHlwZSIsInZhbHVlIiwiZXhjZXB0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibmV3UmVnRXhwIiwidmFsIiwiZmxhZ3MiLCJSZWdFeHAiLCJ0ZXN0IiwiZGVib3VuY2UiLCJmdW4iLCJpc0Nvb2xkb3duIiwiYXBwbHkiLCJ0aGlzIiwiYW5pbWF0aW9uTWVzc2FnZSIsImNoZWNrRXJyb3IiLCJuYW1lIiwicGxhY2Vob2xkZXIiLCJjaGVja2VkIiwicmVxdWlyZWQiLCJsYW5nIiwibWF4TGVuZ3RoIiwibWluTGVuZ3RoIiwiX25hbWUiLCJfbWF4IiwiX21pbiIsIl92YWx1ZSIsInRyaW0iLCJfbGVuZ3RoIiwiX3R5cGUiLCJfZXhjZXAiLCJkYXRhc2V0IiwiZXhjZXAiLCJsZXR0ZXIiLCJ0ZXN0VmFsdWUiLCJlcnJvctChaGVja2luZ9Chb25kaXRpb24iLCJjb25kaXRpb24iLCJpbmNsdWRlcyIsImRhdGFGb3JtIiwiZm9ybSIsImNvbnN0cnVjdG9yIiwiSFRNTEZvcm1FbGVtZW50IiwiZWxlbWVudHMiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJTZXQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJub2RlTmFtZSIsImRhdGEiLCJfaSIsIl9PYmplY3QkZW50cmllcyIsImVudHJpZXMiLCJfT2JqZWN0JGVudHJpZXMkX2kiLCJfc2xpY2VkVG9BcnJheSIsImluZGV4IiwiZWxlbSIsImNoZWNrVHlwZSIsIk51bWJlciIsImZvckVhY2giLCJfY2hlY2tUeXBlIiwiRXJyb3IiLCJib2R5IiwibWVudSIsIm1lbnVMaXN0IiwibWVudUJ0blRvZ2dsZSIsImNsb3NlTWVudSIsIm92ZXJmbG93WSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29udGFpbnMiLCJ0YXJnZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VjY2Vzc01lc3NhZ2UiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc05hbWUiLCJyb2xlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImFkZCJdLCJtYXBwaW5ncyI6Iit3REFFQSxJQUFBQSxPQUFBLElBQUFDLE9BQUEsV0FDQUMsTUFBQSxFQUNBQyxNQUFBLElBQ0FDLGFBQUEsRUFDQUMsYUFBQSxJQUNBQyxXQUFBLENBQ0FDLE9BQUEsdUJBRUFDLE9BQUEsWUFDQUMsU0FBQSxDQUFBQyxNQUFBLEtBQ0FDLEtBQUEsQ0FDQUMsaUJBQUEsVUFFQUMsV0FBQSxDQUNBQyxHQUFBLHFCQUNBQyxXQUFBLEtBSUEsU0FBQUMsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLFNBQUFOLEVBQUFPLEdBQUEsT0FBQVAsRUFBQVEsVUFBQUMsT0FBQUYsRUFBQSxFQUVBRCxFQUFBSCxFQUFBLHNCQUNBQSxFQUFBTyxtQkFDQSw4RUFBQUMsT0FDQVAsRUFBQSxXQUVBLElBQUFRLEVBQUFDLFNBQUFDLGVBQUEsZUFFQSxPQUFBRixHQUNBRyxZQUFBLFdBQ0FILEVBQUFJLGNBQUFDLE1BQUFDLFNBQUEsV0FDQVosRUFBQU0sRUFBQSwrQkFFQUcsWUFBQSxXQUNBSCxFQUFBSSxjQUFBQyxNQUFBQyxT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aEYsVUFBQUMsT0FBQSw0QkFDQTZFLEtBQUE5RSxVQUFBQyxPQUFBLHNCQUVBNkUsS0FBQTlFLFVBQUFxRixTQUFBLHNCQUNBUixLQUFBcEUsTUFBQXlFLFVBQUEsU0FDQUwsS0FBQXBFLE1BQUF5RSxVQUFBLElBQ0EsSUFFQTdFLFNBQ0FrRixpQkFBQSxxQkFDQWIsU0FBQSxTQUFBbEYsR0FBQSxPQUFBQSxFQUFBMkYsaUJBQUEsUUFBQUYsVUFBQSxJQUdBLElBQUEzQixLQUFBakQsU0FBQUMsZUFBQSxnQkFFQUQsU0FBQUMsZUFBQSxjQUFBNkUsaUJBQUEsb0JBR0EsR0FGQTlCLFNBQUFDLE1BRUEsQ0FDQSxJQUFBa0MsRUFBQW5GLFNBQUFvRixjQUFBLE9BQ0FELEVBQUFFLEdBQUEsVUFDQUYsRUFBQUcsVUFBQSxtQkFDQUgsRUFBQUksS0FBQSxRQUNBSixFQUFBSyxZQUNBLG1FQUVBdkMsS0FBQXdDLFlBQUFOLEdBRUFqRixZQUFBLFdBQ0FpRixFQUFBeEYsVUFBQStGLElBQUEsMkJBQ0F4RixZQUFBLFdBQ0FpRixFQUFBeEYsVUFBQVcsT0FBQSwwQkFDQSxTQUNBSixZQUFBLFdBQ0FpRixFQUFBN0UsUUFDQSxPQUNBLE1BQ0EsQ0FDQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlcicsIHtcbiAgbG9vcDogdHJ1ZSxcbiAgc3BlZWQ6IDgwMCxcbiAgaGlkZU9uQ2xpY2s6IHRydWUsXG4gIHNwYWNlQmV0d2VlbjogMjAwLFxuICBuYXZpZ2F0aW9uOiB7XG4gICAgbmV4dEVsOiAnLnN3aXBlci1idXR0b24tbmV4dCcsXG4gIH0sXG4gIGVmZmVjdDogJ2NvdmVyZmxvdycsXG4gIGF1dG9wbGF5OiB7IGRlbGF5OiA3MDAwIH0sXG4gIGExMXk6IHtcbiAgICBuZXh0U2xpZGVNZXNzYWdlOiAn0JLQv9GA0LDQstC+JyxcbiAgfSxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICBjbGlja2FibGU6IHRydWUsXG4gIH0sXG59KTtcblxuZnVuY3Rpb24gYWRkRXJyb3IoaW5wdXQsIG1lc3NhZ2UsIG1zKSB7XG4gIGNvbnN0IHRvZ2dsZUNzc0NsYXNzID0gKGVsLCBjc3NDbGFzcykgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZShjc3NDbGFzcyk7XG5cbiAgdG9nZ2xlQ3NzQ2xhc3MoaW5wdXQsICdlcnJvci12YWxpZF9faW5wdXQnKTtcbiAgaW5wdXQuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICdhZnRlcmVuZCcsXG4gICAgYDxkaXYgaWQ9XCJlcnJvci12YWxpZFwiIGNsYXNzPVwiZXJyb3ItdmFsaWRfX21lc3NhZ2VcIiByb2xlPVwiYWxlcnRcIj4ke21lc3NhZ2V9PGRpdi8+YFxuICApO1xuICBjb25zdCBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvci12YWxpZCcpO1xuXG4gIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZXJyb3IucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICB0b2dnbGVDc3NDbGFzcyhlcnJvciwgJ2Vycm9yLXZhbGlkX19tZXNzYWdlLWFjdGl2ZScpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZXJyb3IucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIHRvZ2dsZUNzc0NsYXNzKGlucHV0LCAnZXJyb3ItdmFsaWRfX2lucHV0Jyk7XG4gICAgICAgIHRvZ2dsZUNzc0NsYXNzKGVycm9yLCAnZXJyb3ItdmFsaWRfX21lc3NhZ2UtYWN0aXZlJyk7XG4gICAgICB9LCBtcyAtIDMwNSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZXJyb3IucmVtb3ZlKCk7XG4gICAgICB9LCBtcyk7XG4gICAgfSwgMTApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlZ0V4cCh0eXBlLCB2YWx1ZSwgZXhjZXB0aW9uID0gJycpIHtcbiAgY29uc3QgbmV3UmVnRXhwID0gKHZhbCwgZmxhZ3MpID0+IG5ldyBSZWdFeHAoYFteJHt2YWx9JHtleGNlcHRpb259XWAsIGZsYWdzKTtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdlbWFpbCc6XG4gICAgICByZXR1cm4gIS9eKFthLXowLTlfLV0rXFwuKSpbYS16MC05Xy1dK0BbYS16MC05Xy1dKyhcXC5bYS16MC05Xy1dKykqXFwuW2Etel17Miw2fSQvLnRlc3QoXG4gICAgICAgIHZhbHVlXG4gICAgICApO1xuICAgIGNhc2UgJ3RlbCc6XG4gICAgICByZXR1cm4gIS9eXFwrXFxkezEsM31cXChcXGR7MiwzfVxcKVxcZHsyLDN9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHZhbHVlKTtcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIG5ld1JlZ0V4cCgnMC05JykudGVzdCh2YWx1ZSk7XG4gICAgY2FzZSAncnUnOlxuICAgICAgcmV0dXJuIG5ld1JlZ0V4cCgn0LAt0Y/RkScsICdnaScpLnRlc3QodmFsdWUpO1xuICAgIGNhc2UgJ2VuJzpcbiAgICAgIHJldHVybiBuZXdSZWdFeHAoJ2EteicsICdnaScpLnRlc3QodmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1biwgbXMpIHtcbiAgbGV0IGlzQ29vbGRvd24gPSBmYWxzZTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNDb29sZG93bikgcmV0dXJuO1xuICAgIGlzQ29vbGRvd24gPSB0cnVlO1xuICAgIGZ1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gKGlzQ29vbGRvd24gPSBmYWxzZSksIG1zKTtcbiAgfTtcbn1cblxuY29uc3QgYW5pbWF0aW9uTWVzc2FnZSA9IGRlYm91bmNlKGFkZEVycm9yLCA1MDAwKTtcblxuZnVuY3Rpb24gY2hlY2tFcnJvcihpbnB1dCkge1xuICAvLyBQcm9wcyBpbnB1dFxuICBjb25zdCB7XG4gICAgdHlwZSxcbiAgICB2YWx1ZSxcbiAgICBuYW1lLFxuICAgIHBsYWNlaG9sZGVyLFxuICAgIGNoZWNrZWQsXG4gICAgcmVxdWlyZWQsXG4gICAgbGFuZyxcbiAgICBtYXhMZW5ndGgsXG4gICAgbWluTGVuZ3RoLFxuICB9ID0gaW5wdXQ7XG4gIC8vIFByb3BzIG9wdGlvblxuICBjb25zdCBfbmFtZSA9IHBsYWNlaG9sZGVyIHx8IHBsYWNlaG9sZGVyICE9PSAnJyA/IHBsYWNlaG9sZGVyIDogbmFtZTtcbiAgY29uc3QgX21heCA9IG1heExlbmd0aDtcbiAgY29uc3QgX21pbiA9IG1pbkxlbmd0aDtcbiAgY29uc3QgX3ZhbHVlID0gdmFsdWUudHJpbSgpO1xuICBjb25zdCBfbGVuZ3RoID0gX3ZhbHVlLmxlbmd0aDtcbiAgY29uc3QgX3R5cGUgPSAodmFsKSA9PiB0eXBlID09PSB2YWw7XG4gIGNvbnN0IF9leGNlcCA9IGlucHV0LmRhdGFzZXQuZXhjZXA7XG4gIGNvbnN0IGxldHRlciA9IGxhbmcgPT09ICdydScgPyAn0YDRg9GB0YHQutC+0LPQvicgOiBsYW5nID09PSAnZW4nICYmICfQu9Cw0YLQuNC90YHQutC+0LPQvic7XG4gIGNvbnN0IHRlc3RWYWx1ZSA9IF92YWx1ZSAhPT0gJycgfHwgcmVxdWlyZWQ7XG5cbiAgZnVuY3Rpb24gZXJyb3LQoWhlY2tpbmfQoW9uZGl0aW9uKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgIGFuaW1hdGlvbk1lc3NhZ2UoaW5wdXQsIGDQn9C+0LvQtSDCqyR7X25hbWV9wrsgJHttZXNzYWdlfWAsIDUwMDApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBbXG4gICAgZXJyb3LQoWhlY2tpbmfQoW9uZGl0aW9uKF9sZW5ndGggPCAxICYmIHJlcXVpcmVkLCAn0L3QtSDRg9C60LDQt9Cw0L3QviEnKSxcbiAgICBlcnJvctChaGVja2luZ9Chb25kaXRpb24oXG4gICAgICAoX21pbiAhPT0gLTEgfHwgX21heCAhPT0gLTEpICYmXG4gICAgICAgIF9sZW5ndGggPj0gMSAmJlxuICAgICAgICAoX2xlbmd0aCA8IF9taW4gfHwgX2xlbmd0aCA+IF9tYXgpLFxuICAgICAgYNC90LUg0LTQvtC70LbQvdC+INCx0YvRgtGMICR7XG4gICAgICAgIF9taW4gJiYgIV9tYXhcbiAgICAgICAgICA/IGDQvNC10L3QtdC1ICR7X21pbn1gXG4gICAgICAgICAgOiBfbWF4ICYmICFfbWluXG4gICAgICAgICAgPyBg0LHQvtC70LXQtSAke19tYXh9YFxuICAgICAgICAgIDogX21pbiAmJlxuICAgICAgICAgICAgX21heCAmJlxuICAgICAgICAgICAgKF9taW4gPT09IF9tYXhcbiAgICAgICAgICAgICAgPyBg0LzQtdC90LXQtSDQuCDQsdC+0LvQtdC1ICR7X21pbn1gXG4gICAgICAgICAgICAgIDogYCR7X21pbn0g0Lgg0LHQvtC70LXQtSAke19tYXh9YClcbiAgICAgIH0g0YHQuNC80LLQvtC70L7QsiFgXG4gICAgKSxcbiAgICBlcnJvctChaGVja2luZ9Chb25kaXRpb24oXG4gICAgICBsYW5nICE9PSAnJyAmJiByZWdFeHAobGFuZywgX3ZhbHVlLCBfZXhjZXApLFxuICAgICAgYNC80L7QttC10YIg0YHQvtC00LXRgNC20LDRgtGMINCyINGB0LXQsdC1INGC0L7Qu9GM0LrQvjog0LHRg9C60LLRiyAke2xldHRlcn0g0LDQu9GE0LDQstC40YLQsCFgXG4gICAgKSxcbiAgICBlcnJvctChaGVja2luZ9Chb25kaXRpb24oXG4gICAgICAoX3R5cGUoJ3JhZGlvJykgfHwgX3R5cGUoJ2NoZWNrYm94JykpICYmICFjaGVja2VkICYmIHJlcXVpcmVkLFxuICAgICAgJ9C90LUg0LLRi9Cx0YDQsNC90L4hJ1xuICAgICksXG4gICAgZXJyb3LQoWhlY2tpbmfQoW9uZGl0aW9uKFxuICAgICAgX3R5cGUoJ251bWJlcicpICYmIHJlZ0V4cCh0eXBlLCBfdmFsdWUpICYmIHRlc3RWYWx1ZSxcbiAgICAgICfRgdC+0LTQtdGA0LbQuNGCINGB0LjQvNCy0L7Qu9GLINC90LUg0Y/QstC70Y/RjtGJ0LjQtdGB0Y8g0YbQuNGE0YDQsNC80LghJ1xuICAgICksXG4gICAgZXJyb3LQoWhlY2tpbmfQoW9uZGl0aW9uKFxuICAgICAgX3R5cGUoJ2VtYWlsJykgJiYgcmVnRXhwKHR5cGUsIF92YWx1ZSkgJiYgdGVzdFZhbHVlLFxuICAgICAgJ9GD0LrQsNC30LDQvdC+INC90LUg0L/RgNCw0LLQuNC70YzQvdC+LCDQuNC70Lgg0LjQvNC10LXRgiDQvdC10LrQvtGA0YDQtdC60YLQvdGD0Y4g0YTQvtGA0LzRg9C70LjRgNC+0LLQutGDISdcbiAgICApLFxuICAgIGVycm9y0KFoZWNraW5n0KFvbmRpdGlvbihcbiAgICAgIF90eXBlKCd0ZWwnKSAmJiByZWdFeHAodHlwZSwgX3ZhbHVlKSAmJiB0ZXN0VmFsdWUsXG4gICAgICAn0LzQvtC20LXRgiDRgdC+0LTQtdGA0LbQsNGC0Ywg0LIg0YHQtdCx0LUg0YLQvtC70YzQutC+INGB0LvQtdC00YPRjtGJ0YPRjiDQvNCw0YHQutGDINCy0LLQvtC00LA6ICvCq9Ca0L7QtCDRgdGC0YDQsNC90YvCuyjCq9Ca0L7QtCDQvtC/0LXRgNCw0YLQvtGA0LDCuynCq9Cd0L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsCDRh9C10YDQtdC3INGC0LjRgNC1wrshJ1xuICAgICksXG4gIF0uaW5jbHVkZXModHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGRhdGFGb3JtKGZvcm0pIHtcbiAgaWYgKGZvcm0uY29uc3RydWN0b3IgPT09IEhUTUxGb3JtRWxlbWVudCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gW1xuICAgICAgLi4ubmV3IFNldChcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhmb3JtLmVsZW1lbnRzKS5maWx0ZXIoXG4gICAgICAgICAgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC5ub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJ1xuICAgICAgICApXG4gICAgICApLFxuICAgIF07XG5cbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBkYXRhID0ge307XG5cbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgZWxlbV0gb2YgT2JqZWN0LmVudHJpZXMoZWxlbWVudHMpKSB7XG4gICAgICBjb25zdCB7IHR5cGUsIG5hbWUsIHZhbHVlLCBjaGVja2VkIH0gPSBlbGVtO1xuICAgICAgY29uc3QgY2hlY2tUeXBlID0gdHlwZSA9PT0gJ3JhZGlvJyB8fCB0eXBlID09PSAnY2hlY2tib3gnO1xuXG4gICAgICBpZiAoY2hlY2tFcnJvcihlbGVtKSA9PT0gdHJ1ZSkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGlmIChjaGVja1R5cGUgJiYgY2hlY2tlZCkgZGF0YVtuYW1lXSA9IGNoZWNrZWQ7XG4gICAgICBpZiAoIWNoZWNrVHlwZSAmJiB2YWx1ZSAhPT0gJycpIGRhdGFbbmFtZV0gPSB2YWx1ZTtcblxuICAgICAgaWYgKE51bWJlcihpbmRleCkgPT09IGVsZW1lbnRzLmxlbmd0aCAtIDEpXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgY29uc3QgX2NoZWNrVHlwZSA9IGVsLnR5cGUgPT09ICdyYWRpbycgfHwgZWwudHlwZSA9PT0gJ2NoZWNrYm94JztcblxuICAgICAgICAgIGlmIChfY2hlY2tUeXBlKSBlbC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCFfY2hlY2tUeXBlKSBlbC52YWx1ZSA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfSBlbHNlIHRocm93IG5ldyBFcnJvcignUGFzc2VkIHBhcmFtZXRlciBpcyBub3QgYSBIVE1MLWZvcm0hJyk7XG59XG5cbi8vIEhlYWRlciBtZW51XG5jb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xuY29uc3QgbWVudUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1saXN0Jyk7XG5jb25zdCBtZW51QnRuVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtb3BlbicpO1xuXG5mdW5jdGlvbiBjbG9zZU1lbnUoKSB7XG4gIG1lbnVCdG5Ub2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19tZW51LW9wZW4tYWN0aXZlJyk7XG4gIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19uYXYtYWN0aXZlJyk7XG4gIGJvZHkuc3R5bGUub3ZlcmZsb3dZID0gbnVsbDtcbn1cblxuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gIGlmICghbWVudUJ0blRvZ2dsZS5jb250YWlucyhlLnRhcmdldCkgJiYgIW1lbnVMaXN0LmNvbnRhaW5zKGUudGFyZ2V0KSlcbiAgICBjbG9zZU1lbnUoKTtcbn0pO1xuXG5tZW51QnRuVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBtZW51QnRuVG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fbWVudS1vcGVuLWFjdGl2ZScpO1xuICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fbmF2LWFjdGl2ZScpO1xuXG4gIGlmIChtZW51LmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19uYXYtYWN0aXZlJykpXG4gICAgYm9keS5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgZWxzZSBib2R5LnN0eWxlLm92ZXJmbG93WSA9IG51bGw7XG59KTtcblxuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX25hdi1saW5rJylcbiAgLmZvckVhY2goKGVsKSA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTWVudSkpO1xuXG4vLyBTdWJtaXQgZm9ybSBjb250YWN0c1xuY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWNvbnRhY3QnKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1zdWJtaXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgZGF0YSA9IGRhdGFGb3JtKGZvcm0pO1xuXG4gIGlmIChkYXRhKSB7XG4gICAgY29uc3Qgc3VjY2Vzc01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzdWNjZXNzTWVzc2FnZS5pZCA9ICdzdWNjZXNzJztcbiAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc05hbWUgPSAnc3VjY2Vzc19fbWVzc2FnZSc7XG4gICAgc3VjY2Vzc01lc3NhZ2Uucm9sZSA9ICdhbGVydCc7XG4gICAgc3VjY2Vzc01lc3NhZ2UudGV4dENvbnRlbnQgPVxuICAgICAgJ9CU0LDQvdC90YvQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3RiyEg0JIg0LHQu9C40LbQsNC50YjQtdC1INCy0YDQtdC80Y8g0LzRiyDRgdCy0Y/QttC10LzRgdGPINGBINCy0LDQvNC4ISc7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKHN1Y2Nlc3NNZXNzYWdlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc3VjY2Vzc01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnc3VjY2Vzc19fbWVzc2FnZS1hY3RpdmUnKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzdWNjZXNzTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzX19tZXNzYWdlLWFjdGl2ZScpO1xuICAgICAgfSwgNTAwMCAtIDMwNSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc3VjY2Vzc01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICB9LCA1MDAwKTtcbiAgICB9LCAxMCk7XG4gIH1cbn0pO1xuIl19
